<mat-grid-list cols="12" rowHeight="50px">
     <mat-grid-tile [colspan]="6" [rowspan]="1"></mat-grid-tile>
     <mat-grid-tile [colspan]="2">
          <div *ngIf="!isLoading && !isBeingEdited">Backend URL</div>
     </mat-grid-tile>

     <mat-grid-tile [colspan]="3">
          <mat-form-field *ngIf="!isLoading && !isBeingEdited">
               <input matInput class="backendURL" [(ngModel)]="dataService.backendURL">               
          </mat-form-field>
     </mat-grid-tile>

     <mat-grid-tile [colspan]="1" [rowspan]="1">
          <button id="loadButton" *ngIf="!isLoading && !isBeingEdited" mat-raised-button color="primary" (click)="getEpisodes()">Load</button>
     </mat-grid-tile>
</mat-grid-list>

<mat-grid-list cols="13" rowHeight="50px">
     <mat-grid-tile [colspan]="12" [rowspan]="1">
          <h1>{{ title }}</h1>
     </mat-grid-tile>

     <mat-grid-tile [colspan]="1" [rowspan]="1">
          <button id="updateButton" *ngIf="!isLoading && !isBeingEdited" mat-raised-button color="primary" (click)="updateButtonClicked()">Update</button>
     </mat-grid-tile>
</mat-grid-list>

<mat-grid-list *ngIf="isLoading" cols="4" rowHeight="150px">
     <mat-grid-tile  [colspan]=4 [rowspan]=2>
          <div class="app-loading">
               <span class="loading">Loading...</span>
               <div class="logo"></div>
                                             
               <svg class="spinner" viewBox="25 25 50 50">
                    <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
               </svg>
          </div>
     </mat-grid-tile>
</mat-grid-list>

<mat-grid-list *ngIf="!isLoading && isEpisodesLoaded" id="options" cols="11" rowHeight="20px">
     <mat-grid-tile id="filter" [colspan]="5" [rowspan]="3">
         <mat-form-field *ngIf="!isBeingEdited && !isFavoritesChecked">
              <input matInput [(ngModel)]="filterValue" (keyup)="applyFilter($event.target.value)" placeholder="Filter">     
         </mat-form-field>
    </mat-grid-tile>

    <mat-grid-tile [colspan]="3" [rowspan]="3">
         <mat-checkbox *ngIf="!isBeingEdited" [(ngModel)]="isFavoritesChecked" id="chkFavorites" (change)="chkFavoritesClick()">Favorites</mat-checkbox>
    </mat-grid-tile>

    <mat-grid-tile [colspan]="3" [rowspan]="3">
         <mat-checkbox *ngIf="!isBeingEdited" [(ngModel)]="descriptionVisible" id="chkShowDescription" (change)="chkShowhideDescription()">Description</mat-checkbox>
    </mat-grid-tile>

    <mat-grid-tile [colspan]="11" [rowspan]="2">
     <mat-paginator *ngIf="!isBeingEdited" #episodePaginator class="episodePaginator" [pageSize]="100" [pageSizeOptions]="[25,50,100,200,500,1000,5000,10000]" showFirstLastButtons></mat-paginator>               
    </mat-grid-tile>
</mat-grid-list>

<table *ngIf="!isLoading && isEpisodesLoaded && (!isBeingEdited || (isBeingEdited && editingItem === 'Episodes'))" mat-table matSort [dataSource]="episodesDataSource" class="episodeTable mat-elevation-z8">
     <ng-container matColumnDef="Action">
          <mat-header-cell *matHeaderCellDef>Action</mat-header-cell>

          <td mat-cell *matCellDef="let element">
               <mat-icon *ngIf="editingAllowed && !isBeingEdited" (click)="editEpisodesIMDBNamesClick('Episodes',element.EpisodeNumber)">edit</mat-icon>
               <mat-icon *ngIf="isBeingEdited && editingItem === 'Episodes' && element.EpisodeID == editingID" (click)="editEpisodesIMDBNamesClick('Episodes',element.EpisodeNumber)">save</mat-icon>
               <mat-icon *ngIf="isBeingEdited && editingItem === 'Episodes' && element.EpisodeID == editingID" (click)="editEpisodesIMDBNamesClick('Episodes',element.EpisodeNumber,true)">cancel</mat-icon>
          </td>
     </ng-container>

     <ng-container matColumnDef="Episode">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Ep # </th>
          <td mat-cell *matCellDef="let element"><div *ngIf="!isBeingEdited|| (isBeingEdited && editingItem === 'Episodes' && element.EpisodeID == editingID)"> {{element.EpisodeNumber}} </div></td>
     </ng-container>

     <ng-container ng-class="nameColumn"  matColumnDef="Name">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
          
          <td mat-cell *matCellDef="let element">
               <div *ngIf="!element.IMDBLink && !isBeingEdited">    
                    {{element.Name}}
               </div>
                    
               <div *ngIf="element.IMDBLink && !isBeingEdited">
                    <div [innerHtml]="element.IMDBLink"></div>
               </div>
                    
               <mat-form-field *ngIf="isBeingEdited && editingItem === 'Episodes' && element.EpisodeID == editingID">
                    <textarea cdkTextareaAutosize
                         #autosize="cdkTextareaAutosize"
                         cdkAutosizeMinRows="1"
                         cdkAutosizeMaxRows="5" matInput name="name" type="text" value="{{element.Name}}" [(ngModel)]="element.Name">
                    </textarea>
               </mat-form-field>
          </td>
     </ng-container>
 
     <ng-container class="descriptionColumn" *ngIf="descriptionVisible" matColumnDef="Description">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Description </th>
          <td mat-cell *matCellDef="let element">
               <div *ngIf="!isBeingEdited">    
                    {{element.Description}}
               </div>

               <mat-form-field *ngIf="isBeingEdited && editingItem === 'Episodes' && element.EpisodeID == editingID">
                    <textarea cdkTextareaAutosize
                         #autosize="cdkTextareaAutosize"
                         cdkAutosizeMinRows="1"
                         cdkAutosizeMaxRows="5"matInput name="Description" type="text" value="{{element.Description}}" [(ngModel)]="element.Description">
                    </textarea>
               </mat-form-field>
          </td>
     </ng-container>
              
      <ng-container matColumnDef="ReleaseDate">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Release Date </th>
          <td mat-cell *matCellDef="let element">
               <div *ngIf="!isBeingEdited">    
                    {{element.ReleaseDate}}
               </div>
               
               <mat-form-field *ngIf="isBeingEdited && editingItem === 'Episodes' && element.EpisodeID == editingID">
                    <textarea cdkTextareaAutosize
                         #autosize="cdkTextareaAutosize"
                         cdkAutosizeMinRows="1"
                         cdkAutosizeMaxRows="5"matInput name="Release Date" type="text" value="{{element.ReleaseDate}}" [(ngModel)]="element.ReleaseDate">
                    </textarea>
               </mat-form-field>
          </td>
     </ng-container>

     <ng-container matColumnDef="Favorite">  
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Favorite </th>
          <td mat-cell *matCellDef="let element"><img *ngIf="!isBeingEdited" [src]="getFavoriteImage(element.Favorite)" id="{{element.EpisodeNumber}}" alt="Favorite icon" style="width:24px;height:24px" (change)="episodeFavoriteClick($event)" /></td>
     </ng-container>

     <ng-container matColumnDef="Check In/Out">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Check In/Out </th>
          <td mat-cell *matCellDef="let element"><button id="checkoutButton" *ngIf="!isBeingEdited" mat-raised-button color="primary" (click)="checkInOutFileClick(element.EpisodeNumber,element.IsCheckedOut)">{{(element.IsCheckedOut == false ? "Check Out" : "Check In")}}</button></td>
     </ng-container>

     <ng-container matColumnDef="isModified">
          <th mat-header-cell *matHeaderCellDef> IsModified </th>
          <td mat-cell *matCellDef="let element"><mat-checkbox disabled checked="{{element.IsModified}}"></mat-checkbox></td>
     </ng-container>
             
     <tr mat-header-row *matHeaderRowDef="episodeDisplayedColumns"></tr>
     <tr mat-row *matRowDef="let row; columns: episodeDisplayedColumns;"></tr>
</table>

<mat-paginator *ngIf="!isLoading && !isBeingEdited && isIMDBLoaded" #imdbPaginator class="imdbPaginator" [pageSize]="100" [pageSizeOptions]="[25,50,100,200,500,1000,5000,10000]" showFirstLastButtons></mat-paginator>

<table id="imdbtable" *ngIf="!isLoading && isIMDBLoaded && (!isBeingEdited || (isBeingEdited && editingItem === 'IMDB'))" mat-table [dataSource]="imdbDataSource" class="mat-elevation-z8 imdbTable">
     <ng-container matColumnDef="Action">
          <mat-header-cell *matHeaderCellDef>Action</mat-header-cell>

          <td mat-cell *matCellDef="let element">
               <mat-icon *ngIf="editingAllowed && !isBeingEdited" (click)="editEpisodesIMDBNamesClick('IMDB',element.ID)">edit</mat-icon>
               <mat-icon *ngIf="isBeingEdited && editingItem === 'IMDB' && element.ID == editingID" (click)="editEpisodesIMDBNamesClick('IMDB',element.ID)">save</mat-icon>
               <mat-icon *ngIf="isBeingEdited && editingItem === 'IMDB' && element.ID == editingID" (click)="editEpisodesIMDBNamesClick('IMDB',element.ID,true)">cancel</mat-icon>
          </td>
     </ng-container>

     <ng-container matColumnDef="ID">
          <th mat-header-cell *matHeaderCellDef> ID </th>
          <td mat-cell *matCellDef="let element"> 
               <div *ngIf="(!isBeingEdited || (isBeingEdited && editingItem === 'IMDB' && element.ID == editingID))">{{element.ID}}</div>
          </td>
     </ng-container>
                                  
     <ng-container class="imdbInputField" matColumnDef="Name">
          <th mat-header-cell *matHeaderCellDef> Name </th>
          <td mat-cell *matCellDef="let element">
               <div *ngIf="!isBeingEdited">    
                    {{element.Name}}
               </div>
                                   
               <mat-form-field *ngIf="isBeingEdited && editingItem === 'IMDB' && element.ID == editingID">
                    <input matInput name="name" placeholder="Name" type="text" value="{{element.Name}}" [(ngModel)]="element.Name" (change)="IMDBItemUpdated(element.ID)">
               </mat-form-field>
          </td>
     </ng-container>

     <ng-container class="imdbInputField" matColumnDef="IMDBURL">
          <th mat-header-cell *matHeaderCellDef> IMDB URL </th>
          <td mat-cell *matCellDef="let element">
               <div *ngIf="!isBeingEdited">    
                    {{element.IMDBURL}}
               </div>
                                   
               <mat-form-field *ngIf="isBeingEdited && editingItem === 'IMDB' && element.ID == editingID">
                    <input matInput name="IMDBURL" placeholder="IMDB_URL" type="text" value="{{element.IMDBURL}}" [(ngModel)]="element.IMDBURL" (change)="IMDBItemUpdated(element.ID)">
               </mat-form-field>
          </td>
     </ng-container>
                              
     <tr mat-header-row *matHeaderRowDef="imdbDisplayedColumns"></tr>
     <tr mat-row *matRowDef="let row; columns: imdbDisplayedColumns;"></tr>
</table>